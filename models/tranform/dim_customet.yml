name: salmah_dbt07
version: '1.0'

source-paths: ["models"]
analysis-paths: ["analysis"]
test-paths: ["tests"]

models:
  - name: dim_customer
    description: |
      The `dim_customer` model creates a dimension table for customers. It generates a unique surrogate key based on the `CustomerID` and `Country` columns and includes additional information such as the customer's country.
    columns:
      - name: customer_id
        description: Unique surrogate key for customers
      - name: country
        description: Customer's country
      - name: iso
        description: ISO code for the country (joined from the `country` source)

  - name: dim_datetime
    description: |
      The `dim_datetime` model extracts date and time components from the `InvoiceDate` column, creating a dimension table with various time-related attributes such as year, month, day, hour, minute, weekday, quarter, and more.
    columns:
      - name: datetime_id
        description: Distinct datetime IDs extracted from InvoiceDate
      - name: year
        description: Year extracted from datetime_id
      - name: month
        description: Month extracted from datetime_id
      - name: day
        description: Day extracted from datetime_id
      - name: hour
        description: Hour extracted from datetime_id
      - name: minute
        description: Minute extracted from datetime_id
      - name: weekday
        description: Day of the week extracted from datetime_id
      - name: weekday2
        description: Formatted day of the week (full name) extracted from datetime_id
      - name: quarter
        description: Quarter extracted from datetime_id
      - name: week_number
        description: Week number extracted from datetime_id
      - name: weekday_weekend
        description: Categorized as 'Weekend' or 'Weekday' based on the day of the week
      - name: holiday
        description: Categorized as 'Holiday' or 'Non-Holiday' based on specific conditions
      - name: leap_year
        description: Categorized as 'Leap Year' or 'Non-Leap Year' based on leap year conditions
      - name: season
        description: Season categorization based on the month extracted from datetime_id

  - name: dim_product
    description: |
      The `dim_product` model creates a dimension table for products, including a unique surrogate key based on `StockCode`, `Description`, and `UnitPrice`. It includes information such as stock code, description, and price.
    columns:
      - name: product_id
        description: Unique surrogate key for products
      - name: stock_code
        description: Stock code of the product
      - name: description
        description: Description of the product
      - name: price
        description: Unit price of the product

  - name: fact_invoices
    description: |
      The `fact_invoices` model creates a fact table by joining relevant keys from dimension tables (`dim_datetime`, `dim_product`, `dim_customer`). It includes information about invoices, such as invoice ID, datetime ID, product ID, customer ID, quantity, and total.
    columns:
      - name: invoice_id
        description: Invoice ID
      - name: datetime_id
        description: Foreign key referencing `dim_datetime`
      - name: product_id
        description: Foreign key referencing `dim_product`
      - name: customer_id
        description: Foreign key referencing `dim_customer`
      - name: quantity
        description: Quantity of products in the invoice
      - name: total
        description: Total cost of the products in the invoice

  - name: date_producet
    description: |
      (Note: There's a typo in the model name. It seems to be a combination of `dim_date` and `dim_product`. Please confirm the correct name.)
    columns:
      - name: datetime_id
        description: Distinct datetime IDs (similar to `dim_datetime`)
      - name: year
        description: Year extracted from datetime_id
      - name: month
        description: Month extracted from datetime_id
      - name: day
        description: Day extracted from datetime_id
      - name: hour
        description: Hour extracted from datetime_id
      - name: minute
        description: Minute extracted from datetime_id
      - name: weekday
        description: Day of the week extracted from datetime_id
      - name: weekday2
        description: Formatted day of the week (full name) extracted from datetime_id
      - name: quarter
        description: Quarter extracted from datetime_id
      - name: week_number
        description: Week number extracted from datetime_id
      - name: weekday_weekend
        description: Categorized as 'Weekend' or 'Weekday' based on the day of the week
      - name: holiday
        description: Categorized as 'Holiday' or 'Non-Holiday' based on specific conditions
      - name: leap_year
        description: Categorized as 'Leap Year' or 'Non-Leap Year' based on leap year conditions
      - name: season
        description: Season categorization based on the month extracted from datetime_id

